(this["webpackJsonpai-reversi"]=this["webpackJsonpai-reversi"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a,i,o=n(1),r=n.n(o),s=n(4),l=n.n(s),c=(n(12),n(13),n(7)),u=(n(14),n(15),["1","2","3","4","5","6","7","8"]),g=["a","b","c","d","e","f","g","h"],h=[-9,-8,-7,-1,1,7,8,9],f="assets/images/bpiece.png",v="assets/images/wpiece.png",m="assets/images/cw.png";!function(e){e[e.BLACK=0]="BLACK",e[e.WHITE=1]="WHITE",e[e.CANDIDATE=2]="CANDIDATE",e[e.NONE=3]="NONE"}(a||(a={})),function(e){e[e.OPPONENT=0]="OPPONENT",e[e.OUR=1]="OUR",e[e.NONE=2]="NONE"}(i||(i={}));var O=new Array(64);O.fill({image:"null",position:{x:9,y:9},type:a.NONE,team:i.NONE}),O[3+3*g.length]={image:f,position:{x:3,y:3},type:a.BLACK,team:i.OPPONENT},O[3+4*g.length]={image:v,position:{x:3,y:4},type:a.WHITE,team:i.OUR},O[4+3*g.length]={image:v,position:{x:4,y:3},type:a.WHITE,team:i.OUR},O[4+4*g.length]={image:f,position:{x:4,y:4},type:a.BLACK,team:i.OPPONENT},O[4+5*g.length]={image:m,position:{x:4,y:5},type:a.CANDIDATE,team:i.NONE};var p=O,N=n(0);function y(e){var t=e.ptype,n=e.image;return t===a.BLACK||t===a.WHITE?Object(N.jsx)("div",{className:"tile",children:n&&Object(N.jsx)("div",{style:{backgroundImage:"url(".concat(n,")")},className:"piece"})}):t===a.CANDIDATE?Object(N.jsx)("div",{className:"tile",children:n&&Object(N.jsx)("div",{style:{backgroundImage:"url(".concat(n,")")},className:"candidate"})}):Object(N.jsx)("div",{className:"tile",children:Object(N.jsx)("div",{style:{backgroundImage:"url(".concat(void 0,")")},className:"piece"})})}var d=n(5),E=n(6),b=function(){function e(){Object(d.a)(this,e)}return Object(E.a)(e,[{key:"makeWMove",value:function(e,t,n){for(var o,r=[],s=0;s<h.length;s++)this.feasibleMove(e,t,h[s],i.OUR)&&r.push(h[s]);e[t]={image:v,position:{x:t%g.length,y:Math.floor(t/g.length)},type:a.WHITE,team:i.OUR};for(var l=0;l<r.length;l++)for(o=t+r[l];e[o].team===i.OPPONENT;)e[o]={image:v,position:{x:o%g.length,y:Math.floor(o/g.length)},type:a.WHITE,team:i.OUR},o+=r[l];if(n){var c=new Audio;r.length<3?(c.src="assets/sound/put_piece.wav",c.play()):(c.src="assets/sound/go_go.ogg",c.play())}return e}},{key:"makeBMove",value:function(e,t,n){for(var o,r=[],s=0;s<h.length;s++)this.feasibleMove(e,t,h[s],i.OPPONENT)&&r.push(h[s]);e[t]={image:f,position:{x:t%g.length,y:Math.floor(t/g.length)},type:a.BLACK,team:i.OPPONENT};for(var l=0;l<r.length;l++)for(o=t+r[l];e[o].team===i.OUR;)e[o]={image:f,position:{x:o%g.length,y:Math.floor(o/g.length)},type:a.BLACK,team:i.OPPONENT},o+=r[l];if(n){var c=new Audio;r.length<3?(c.src="assets/sound/put_piece.wav",c.play()):(c.src="assets/sound/look_out.ogg",c.play())}return e}},{key:"feasibleMove",value:function(e,t,n,a){var o=t+n;if(o>=0&&o<e.length){if(o%8===0&&(o-n)%8===7||o%8===7&&(o-n)%8===0)return!1;for(;e[o].team!==i.NONE&&e[o].team!==a&&(o+=n)>=0&&o<e.length;){if(o%8===0&&(o-n)%8===7||o%8===7&&(o-n)%8===0)return!1;if(e[o].team===a)return!0}}return!1}},{key:"validMoves",value:function(e,t,n){for(var a=[],o=0;o<e.length;o++)if(e[o].team===i.NONE)for(var r=0;r<h.length;r++)this.feasibleMove(e,o,h[r],t)&&(a.push(o),r=h.length);if(n&&0===a.length){var s=new Audio;this.utilityGame(e)>0?(s.src="assets/sound/over_lose.ogg",s.play()):(s.src="assets/sound/you_win.ogg",s.play())}return a}},{key:"utilityGame",value:function(e){for(var t=0,n=0;n<e.length;n++)e[n].team===i.OPPONENT?t++:e[n].team===i.OUR&&t--;return t}},{key:"minValue",value:function(e,t,a,o,r,s){if(o<=a)return[this.utilityGame(e),t];for(var l=this.validMoves(e,i.OUR,!1),c=[1/0,t],u=0;u<l.length;u++){var g=n(3).clone(e,!0);g=this.makeWMove(g,l[u],!1);var h=this.maxValue(g,l[u],a+1,o,r,s);if(c[0]>h[0]&&(c=h),c[0]<=r)return c;c[0]<s&&(s=c[0]),g=null}return c}},{key:"maxValue",value:function(e,t,a,o,r,s){if(o<=a)return[this.utilityGame(e),t];var l=this.validMoves(e,i.OPPONENT,!1),c=[-1/0,1];0===a&&(c[1]=l[0]);for(var u=0;u<l.length;u++){var g=n(3).clone(e,!0);g=this.makeBMove(g,l[u],!1);var h=this.minValue(g,l[u],a+1,o,r,s);if(c[0]<h[0]&&(c[0]=h[0],0===a&&(c[1]=l[u])),c[0]>=s)return c;c[0]>r&&(r=c[0]),g=null}return c}},{key:"alphaBeta",value:function(e,t){return-1/0,1/0,this.maxValue(e,0,0,t,-(1/0),Infinity)[1]}}]),e}(),j=[];function T(){var e=new b,t=Object(o.useState)(p),r=Object(c.a)(t,2),s=r[0],l=r[1],h=Object(o.useRef)(null);if(0===j.length){j=e.validMoves(s,i.OUR,!0);for(var f=0;f<j.length;f++)s[j[f]]={image:m,position:{x:j[f]%g.length,y:Math.floor(j[f]/g.length)},type:a.CANDIDATE,team:i.NONE}}for(var v=[],O=u.length-1;O>=0;O--)for(var d=0;d<g.length;d++){var E=s[O*g.length+d],T=E?E.image:void 0,x=E?E.type:a.NONE;v.push(Object(N.jsx)(y,{image:T,ptype:x},"".concat(d,",").concat(O)))}return Object(N.jsx)("div",{onMouseDown:function(t){return function(t){var i=t.target,o=h.current;if(i.classList.contains("candidate")&&o){for(var r=Math.floor((t.clientX-o.offsetLeft)/100),c=Math.abs(Math.ceil((t.clientY-o.offsetTop-800)/100)),u=r+g.length*c,f=0;f<j.length;f++)s[j[f]].type=a.NONE;var v=n(3),m=v.clone(s,!0);m=e.makeWMove(m,u,!0),l(m),m=v.clone(m,!0);var O=e.alphaBeta(m,6);setTimeout((function(){m=e.makeBMove(m,O,!0)}),999),setTimeout((function(){j.length=0,l(m)}),1111)}}(t)},id:"board",ref:h,children:v})}var x=function(){return Object(N.jsx)("div",{id:"App",children:Object(N.jsx)(T,{})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),o(e),r(e)}))};l.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(x,{})}),document.getElementById("root")),M()}},[[19,1,2]]]);
//# sourceMappingURL=main.9e7614ba.chunk.js.map